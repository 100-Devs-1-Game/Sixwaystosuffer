[gd_scene load_steps=34 format=3 uid="uid://d2tor451umskh"]

[ext_resource type="Script" uid="uid://woog8sypojfk" path="res://player/player.gd" id="1_g1dw6"]
[ext_resource type="Script" uid="uid://drivgd6dxexp8" path="res://player/player_head.gd" id="2_yw30f"]
[ext_resource type="Script" uid="uid://tsoag28itu8l" path="res://player/camera/camera_shaker.gd" id="3_kb6p2"]
[ext_resource type="PackedScene" uid="uid://dvbqsel4ymb2x" path="res://revolver/revolver.tscn" id="3_qjkh3"]
[ext_resource type="AudioStream" uid="uid://c3u4424s0t8o1" path="res://assets/sfx/load_01.ogg" id="4_kb6p2"]
[ext_resource type="Script" uid="uid://cl1e3pibhd4je" path="res://player/patron_pickup.gd" id="4_yw30f"]
[ext_resource type="PackedScene" uid="uid://bsrippgh7mwp4" path="res://revolver/bullets/patron.tscn" id="5_8t03j"]
[ext_resource type="Script" uid="uid://dfrwjwp73xpko" path="res://common/states/state_machine.gd" id="5_qjkh3"]
[ext_resource type="Script" uid="uid://dvh37wnsy4miy" path="res://common/interactions/clickable_area3d.gd" id="5_wodsf"]
[ext_resource type="Script" uid="uid://deqs4bhyfhrhb" path="res://player/states/player_idle_state.gd" id="6_boad6"]
[ext_resource type="Script" uid="uid://cob23grtlvb82" path="res://player/states/player_reload_revolver_state.gd" id="6_g6k8r"]
[ext_resource type="Script" uid="uid://bnk40dsy0isd7" path="res://player/states/player_take_revolver.gd" id="7_2ieo8"]
[ext_resource type="Script" uid="uid://1yyenj6p76lf" path="res://player/states/player_self_aiming_state.gd" id="8_rgyib"]
[ext_resource type="Script" uid="uid://c88mh0j26u8nj" path="res://player/states/player_target_aiming_state.gd" id="10_ebec5"]

[sub_resource type="Curve" id="Curve_kb6p2"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.195767, 0.786228), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="Curve" id="Curve_wodsf"]
_data = [Vector2(0, 0.400892), 0.0, 0.0, 0, 0, Vector2(1, 0.800297), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Animation" id="Animation_28aoi"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Camera Point:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.0174533, -0.0174533, 0.0174533)]
}

[sub_resource type="Animation" id="Animation_vvh5c"]
resource_name = "idle"
length = 0.76667
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Camera Point:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.566667, 0.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.0174533, -0.00698132, 0.00698132), Vector3(0, 0, 0), Vector3(0.00698132, 0.00698132, -0.00698132), Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_jnlp7"]
_data = {
&"RESET": SubResource("Animation_28aoi"),
&"idle": SubResource("Animation_vvh5c")
}

[sub_resource type="BoxShape3D" id="BoxShape3D_32hag"]
size = Vector3(0.16, 0.83, 1.26845)

[sub_resource type="Animation" id="Animation_2ieo8"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_8t03j"]
resource_name = "idle"
length = 1.2
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.533333, 1.2),
"transitions": PackedFloat32Array(1, -2, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, -0.01, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.533333, 1.2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0.0139626, 0, 0), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_ebec5"]
resource_name = "tremor"
length = 0.100003
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667, 0.1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0.00523599, 0), Vector3(0, -0.00523599, 0), Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ebec5"]
_data = {
&"RESET": SubResource("Animation_2ieo8"),
&"idle": SubResource("Animation_8t03j"),
&"tremor": SubResource("Animation_ebec5")
}

[sub_resource type="Animation" id="Animation_yw30f"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player Hand:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.165, 0.894, -0.392)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Player Hand:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/2/type = "animation"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Player Hand/Tremor/Revolver/AnimationPlayer")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"clips": PackedStringArray("RESET"),
"times": PackedFloat32Array(0)
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Player Head/Camera Point/Camera3D:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.00252759, 0.144804, 0.00252795)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Player Head/Camera Point/Camera3D:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.174533, -1.8062e-09, -3.25081e-10)]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Player Head/Camera Point/Camera3D:fov")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [60.0]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("Player Hand/Load Audio Stream:playing")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_qjkh3"]
resource_name = "close_drum"
length = 0.500004
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player Hand:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.166667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.06, 0.824, -0.392), Vector3(0.165, 0.894, -0.392)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Player Hand:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.166667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-0.298451, 0.349066, -0.190241), Vector3(0, 0, 0)]
}
tracks/2/type = "animation"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Player Hand/Tremor/Revolver/AnimationPlayer")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"clips": PackedStringArray("close_drum"),
"times": PackedFloat32Array(0.0416667)
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Player Head/Camera Point/Camera3D:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.291667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-0.037, 0.145, -1), Vector3(0.00252759, 0.144804, 0.00252795)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Player Head/Camera Point/Camera3D:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.291667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-0.733038, 0, 0), Vector3(-0.174533, -1.8062e-09, -3.25081e-10)]
}

[sub_resource type="Animation" id="Animation_g6k8r"]
resource_name = "idle"
length = 1.66667
loop_mode = 1
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player Hand:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.833333, 1.70833),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0.165, 0.894, -0.392), Vector3(0.165, 0.91, -0.392), Vector3(0.165, 0.894, -0.392)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Player Hand:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.833333, 1.70833),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.0174533, 0.0174533, 0.0174533), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_g1dw6"]
resource_name = "open_drum"
length = 0.500004
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player Hand:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.165, 0.894, -0.392), Vector3(0.06, 0.824, -0.392)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Player Hand:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.25),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.298451, 0.349066, -0.190241)]
}
tracks/2/type = "animation"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Player Hand/Tremor/Revolver/AnimationPlayer")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"clips": PackedStringArray("RESET", "RESET", "open_drum"),
"times": PackedFloat32Array(0, 0.0416667, 0.0833333)
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Player Head/Camera Point/Camera3D:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.25),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.00252759, 0.144804, 0.00252795), Vector3(-0.037, 0.145, -1)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Player Head/Camera Point/Camera3D:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.208333, 0.291667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-0.174533, -1.8062e-09, -3.25081e-10), Vector3(-0.523599, 0, 0), Vector3(-0.733038, 0, 0)]
}

[sub_resource type="Animation" id="Animation_boad6"]
resource_name = "self_aim"
length = 0.666671
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player Hand:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.125, 0.291667, 0.333333, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0.165, 0.894, -0.392), Vector3(0.3, 0.902, -0.392), Vector3(-0.373, -0.2, -0.67), Vector3(-0.373, -0.4, -0.67), Vector3(-0.298, -0.16, -0.764)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Player Hand:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.291667, 0.416667, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.0820305, -0.225147, -0.20944), Vector3(1.86576, -0.10472, 0.174533), Vector3(1.74533, 0.20944, 0.174533), Vector3(1.86623, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Player Head/Camera Point/Camera3D:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.25, 0.333333, 0.458333),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.174533, -1.8062e-09, -3.25081e-10), Vector3(-0.331613, 0, 0), Vector3(-0.349066, 0, 0), Vector3(-0.0349066, 0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Player Hand/Load Audio Stream:playing")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.14),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_yllr7"]
resource_name = "target_aim"
length = 0.500005
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player Hand:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.375),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.165, 0.894, -0.392), Vector3(-0.315, 1, -0.137)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Player Hand:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0.10472, -0.115192, -0.0523599), Vector3(0.0349066, 0.0523599, -0.0174533), Vector3(0, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Player Head/Camera Point/Camera3D:fov")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.375),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [60.0, 40.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Player Head/Camera Point/Camera3D:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.375),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-0.174533, -1.8062e-09, -3.25081e-10), Vector3(0, 0, 0)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Player Hand/Load Audio Stream:playing")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.16),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_qjkh3"]
_data = {
&"RESET": SubResource("Animation_yw30f"),
&"close_drum": SubResource("Animation_qjkh3"),
&"idle": SubResource("Animation_g6k8r"),
&"open_drum": SubResource("Animation_g1dw6"),
&"self_aim": SubResource("Animation_boad6"),
&"target_aim": SubResource("Animation_yllr7")
}

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_32hag"]
random_pitch = 1.2
random_volume_offset_db = 5.0
streams_count = 1
stream_0/stream = ExtResource("4_kb6p2")

[sub_resource type="Curve3D" id="Curve3D_hg6s5"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0.495, 0.485, 0.71, -0.380372, 0.866075, -0.653451, 0, 0, 0, -0.25, -0.54, 0, -0.716041, 0.395766, -0.277608, 0, 0.225, 0.45, 0, 0, 0, -1.3, 0, -2),
"tilts": PackedFloat32Array(0, 0, 0)
}
point_count = 3

[node name="Player" type="Node3D"]
script = ExtResource("1_g1dw6")

[node name="Player Head" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.322175, 1.35497, 1.24169)
script = ExtResource("2_yw30f")
mouse_sensitivity = 0.001

[node name="Camera Point" type="Node3D" parent="Player Head"]
transform = Transform3D(0.999701, -0.0171452, -0.0174497, 0.0174498, 0.999695, 0.0174524, 0.0171452, -0.0177517, 0.999695, 0, 0, 0)

[node name="Camera3D" type="Camera3D" parent="Player Head/Camera Point"]
transform = Transform3D(1, 6.38725e-10, -1.77876e-09, -3.20142e-10, 0.984808, 0.173648, 1.86265e-09, -0.173648, 0.984808, 0.00252759, 0.144804, 0.00252795)
fov = 60.0

[node name="CameraShaker" type="Node" parent="Player Head/Camera Point" node_paths=PackedStringArray("camera")]
unique_name_in_owner = true
script = ExtResource("3_kb6p2")
camera = NodePath("../Camera3D")
shake_amount = SubResource("Curve_kb6p2")
shake_duration = SubResource("Curve_wodsf")
shake_range = Vector2i(5, 8)
metadata/_custom_type_script = "uid://tsoag28itu8l"

[node name="AnimationPlayer" type="AnimationPlayer" parent="Player Head"]
libraries = {
&"": SubResource("AnimationLibrary_jnlp7")
}
autoplay = "idle"
speed_scale = 0.1

[node name="Player Hand" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.999999, 0, 0, 0, 0.999999, 0.165, 0.894, -0.392)

[node name="Tremor" type="Node3D" parent="Player Hand"]

[node name="Revolver" parent="Player Hand/Tremor" node_paths=PackedStringArray("camera_shaker") instance=ExtResource("3_qjkh3")]
unique_name_in_owner = true
visible = false
camera_shaker = NodePath("../../../Player Head/Camera Point/CameraShaker")

[node name="Revolver Interact Area3D" type="Area3D" parent="Player Hand/Tremor/Revolver"]
monitoring = false
monitorable = false
script = ExtResource("5_wodsf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player Hand/Tremor/Revolver/Revolver Interact Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.485467)
shape = SubResource("BoxShape3D_32hag")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Player Hand/Tremor"]
libraries = {
&"": SubResource("AnimationLibrary_ebec5")
}
autoplay = "idle"

[node name="AnimationPlayer" type="AnimationPlayer" parent="Player Hand"]
root_node = NodePath("../..")
libraries = {
&"": SubResource("AnimationLibrary_qjkh3")
}

[node name="Load Audio Stream" type="AudioStreamPlayer" parent="Player Hand"]
stream = SubResource("AudioStreamRandomizer_32hag")

[node name="Patron Pickup Trajectory" type="Node3D" parent="."]

[node name="Patron Load Trajectory" type="Path3D" parent="Patron Pickup Trajectory"]
curve = SubResource("Curve3D_hg6s5")

[node name="PathFollow3D" type="PathFollow3D" parent="Patron Pickup Trajectory/Patron Load Trajectory"]
transform = Transform3D(-0.820253, -0.279553, -0.498893, -2.98e-08, 0.87231, -0.488814, 0.571867, -0.400974, -0.715584, -0.380372, 0.866075, -0.653451)
loop = false

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
unique_name_in_owner = true
script = ExtResource("5_qjkh3")
initial_state = NodePath("PlayerIdleState")
metadata/_custom_type_script = "uid://dfrwjwp73xpko"

[node name="PlayerIdleState" type="Node" parent="StateMachine" node_paths=PackedStringArray("revolver_interact")]
script = ExtResource("6_boad6")
revolver_interact = NodePath("../../Player Hand/Tremor/Revolver/Revolver Interact Area3D")
metadata/_custom_type_script = "uid://deqs4bhyfhrhb"

[node name="PlayerTakeRevolver" type="Node" parent="StateMachine" node_paths=PackedStringArray("player", "revolver", "audio_player")]
script = ExtResource("7_2ieo8")
player = NodePath("../..")
revolver = NodePath("../../Player Hand/Tremor/Revolver")
audio_player = NodePath("../../Player Hand/Load Audio Stream")
metadata/_custom_type_script = "uid://bnk40dsy0isd7"

[node name="PlayerReloadRevolverState" type="Node" parent="StateMachine" node_paths=PackedStringArray("player_hand_animation", "revolver", "revolver_interact", "patron_pickup")]
script = ExtResource("6_g6k8r")
player_hand_animation = NodePath("../../Player Hand/AnimationPlayer")
revolver = NodePath("../../Player Hand/Tremor/Revolver")
revolver_interact = NodePath("../../Player Hand/Tremor/Revolver/Revolver Interact Area3D")
patron_pickup = NodePath("Patron Pickup")
metadata/_custom_type_script = "uid://cob23grtlvb82"

[node name="Patron Pickup" type="Node" parent="StateMachine/PlayerReloadRevolverState" node_paths=PackedStringArray("target_point", "drum_target_point", "revolver", "path", "path_follow", "chamber_node", "patrons_node")]
script = ExtResource("4_yw30f")
target_point = NodePath("../../../Patron Pickup Trajectory")
drum_target_point = NodePath("../../../Player Hand/Tremor/Revolver/Revolver Hand/revolver/Current Position Hover")
revolver = NodePath("../../../Player Hand/Tremor/Revolver")
path = NodePath("../../../Patron Pickup Trajectory/Patron Load Trajectory")
path_follow = NodePath("../../../Patron Pickup Trajectory/Patron Load Trajectory/PathFollow3D")
chamber_node = NodePath("../../../Player Hand/Tremor/Revolver/Revolver Hand/revolver/revolver_chamber")
patrons_node = NodePath("../../../Patrons")

[node name="PlayerSelfAimingState" type="Node" parent="StateMachine" node_paths=PackedStringArray("player_hand_animation", "tremor_animation", "revolver")]
script = ExtResource("8_rgyib")
player_hand_animation = NodePath("../../Player Hand/AnimationPlayer")
tremor_animation = NodePath("../../Player Hand/Tremor/AnimationPlayer")
revolver = NodePath("../../Player Hand/Tremor/Revolver")
metadata/_custom_type_script = "uid://1yyenj6p76lf"

[node name="PlayerTargetAimingState" type="Node" parent="StateMachine" node_paths=PackedStringArray("player_hand_animation", "revolver")]
script = ExtResource("10_ebec5")
player_hand_animation = NodePath("../../Player Hand/AnimationPlayer")
revolver = NodePath("../../Player Hand/Tremor/Revolver")
metadata/_custom_type_script = "uid://c88mh0j26u8nj"

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.668913, 1.8688, -0.454168)
omni_range = 2.0

[node name="Patrons" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.4733, 0, -2.05937)

[node name="Patron" parent="Patrons" instance=ExtResource("5_8t03j")]
transform = Transform3D(0.99999, 0, 0, 0, 0.999993, 0, 0, 0, 0.999992, -0.071775, 0.0242003, -0.0111128)

[node name="Patron2" parent="Patrons" instance=ExtResource("5_8t03j")]
transform = Transform3D(0.99999, 0, 0, 0, 0.999993, 0, 0, 0, 0.999992, 0.002285, 0.0242003, 0.114717)

[node name="Patron3" parent="Patrons" instance=ExtResource("5_8t03j")]
transform = Transform3D(0.929413, 0.369014, 1.61301e-08, 0, -4.37111e-08, 0.999992, 0.369013, -0.929416, -4.0626e-08, 0.052735, -0.0541641, -0.0621728)
